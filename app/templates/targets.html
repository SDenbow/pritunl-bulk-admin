{% extends "base.html" %}
{% block content %}

<div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
  <h2>Targets</h2>
  <a class="btn primary" href="/targets/new">Add Target</a>
</div>

{% if error %}
  <div class="alert error">
    <div class="title">Error</div>
    <div>{{ error }}</div>
  </div>
{% endif %}

<div class="card">
  {% if targets and targets|length > 0 %}
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Base URL</th>
          <th>Auth</th>
          <th>Verify TLS</th>
          <th>Groups</th>
          <th>Org</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for t in targets %}
          <tr>
            <td><a href="/targets/{{ t.id }}">{{ t.name }}</a></td>
            <td>{{ t.base_url }}</td>
            <td>{{ t.auth_mode }}</td>
            <td>{{ "yes" if t.verify_tls else "no" }}</td>
            <td>{{ "yes" if t.supports_groups else "no" }}</td>
            <td>{{ t.org_name or "" }}</td>
            <td><a href="/targets/{{ t.id }}/edit">Edit</a></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="small">No targets yet. Click <b>Add Target</b> to create one.</div>
  {% endif %}
</div>

{% endblock %}
